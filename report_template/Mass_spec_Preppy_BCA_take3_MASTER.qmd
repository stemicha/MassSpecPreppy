---
title: "Mass Spec Preppy"
author: "Stephan Michalik"
date: '`r format(Sys.Date(), "%B %d, %Y")`'
title-block-banner: "#151515"
subtitle: "BCA assay - protein concentration determination on OT-2"
page-layout: full
css: styles.css
format:
  html:
    toc: true
    toc-depth: 3
    toc-title: Contents
    toc-location: left # default is right, option is 'body'
    html-math-method: katex
    self-contained: true
    anchor-sections: true
    smooth-scroll: true
params:
  number_of_samples: NA
  sample_list: NA
  deck_plot: NA
  file_name: NA
---



```{r global.options, include = F}
knitr::opts_chunk$set(
    cache       = FALSE,     # if TRUE knitr will cache the results to reuse in future knits
    fig.align   = 'center', # how to align graphics in the final doc. 'left', 'right', 'center'
    fig.path    = 'figures/',  # file path to the directory where knitr shall store the graphics files
    echo        = TRUE,     # in FALSE knitr will not display code in the code chunk above it's results
    message     = TRUE,     # if FALSE knitr will not display any messages generated by code
    eval        = TRUE,     # if FALSE knitr will not display any messages generated by code
    strip.white = TRUE,     # if FALSE knitr will not remove white spaces at the beg or end of code chunk
    warning     = FALSE,
    cols.min.print = 10,
    highlight = T,
    rows.print = 10)    # if FALSE knitr will not display any warning messages in the final document
```



  <!-- setup and insert packages -->  

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
suppressMessages(library(tidyverse))
suppressMessages(library(DT))
suppressMessages(library(kableExtra))
suppressMessages(library(readxl))
suppressMessages(library(htmltools))
suppressMessages(library(htmlwidgets))

```


**filename:** <span style="color:#4A7CB3; font-weight: bold; font-size:18.0pt">`r params$file_name`</span>


# BCA assay - samples according to provided input table

- number of samples: **`r params$number_of_samples`**

## sample list

::: {.callout-warning}
## samples should be well resolubilized and all liquid should be at the bottom of the reaction vessel
:::

```{r,echo=F}
datatable(as_tibble(params$sample_list) %>% 
            rename(`x-fold dilution` = dilution),
          options = list(
            columnDefs = list(list(className = 'dt-center', targets = "_all"))
            ))
```

# shinyBCA protocol on OT-2

::: {.callout-important}
## Always perform labware calibration before starting this protocol at the OT-2 app
:::

::: {.callout-note appearance="simple" icon=false}
## please provide WITHOUT AIR BUBBLES:

- 1 mg/ml BSA standard in H~2~O
- 1x sample buffer
- 2x sample buffer
- Micro BCA Protein Assay Kit - working reagent (25:24:1, Reagent MA:MB:MC)
:::

::: {.callout-note}
## After robot is done:

- incubate in the dark at 60°C for 1 hour
- after incubation led plate cool down for 30 minutes 
- measure e.g. at the Synergy H1 plate reader with take3 adapter
:::

```{r,echo=F}
knitr::include_graphics(params$deck_plot)
```

## shinyBCA protocol on OT-2 - steps


```{r,echo=F}
step1 <- tibble::tribble(
  ~"step",	~"pipette",	~"transfer volume [µl]",	~"sample volume [µl] after step",	~"descritpion",
  "1",	"single channel P20",	"variable",	"variable",	"transfer diluent (water) to preparation plate for the 2x BSA standard curve",
  "2",	"single channel P20",	"variable",	"variable",	"transfer BSA standard to preparation plate for the 2x BSA standard curve",
  "3",	"8-channel P20",	"variable",	"variable",	"transfer 1x sample buffer to preparation plate for dilution",
  "4","single channel P20","variable","variable","take out volume from the before distributed well for the sample dilution",
  "5",	"single channel P20",	"variable",	"variable",	"perform sample dilution (min. volume 25µl of diluted samples; min. max. 1µl of sample used depending on dilution)",
  "6","8-channel P20","10","10","distribute working reagent to BCA plate",
  "7",	"8-channel P20",	"5",	"15",	"distribute 2x sample buffer for standard wells",
  "8",	"8-channel P20",	"5",	"20",	"distribute 2x BSA standard curve to BCA plate",
  "9",	"8-channel P20",	"10",	"20",	"distribute diluted sample to BCA plate")

DT::datatable(step1,rownames= FALSE,options = list(pageLength = nrow(step1),
                                   initComplete = htmlwidgets::JS("function(settings, json) {",
                                                    "$(this.api().table().header()).css({'background-color': '#000', 'color': '#fff'});",
                                                    "}")))

```
